<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard ‚Äî Run, Ganis, Run!</title>
  <link rel="stylesheet" href="css/shared.css">
  <style>
    body {
      background: #E3F2FD;
      color: var(--black);
    }
    
    /* Bauhaus decorations */
    .bg-circle {
      width: 400px;
      height: 400px;
      background: var(--blue);
      opacity: 0.3;
      top: -150px;
      left: -150px;
    }
    
    .bg-square {
      width: 200px;
      height: 200px;
      background: var(--red);
      bottom: 50px;
      right: -50px;
    }
    
    .bg-circle-2 {
      width: 120px;
      height: 120px;
      background: var(--yellow);
      top: 40%;
      right: 5%;
    }
    
    .page-header {
      background: var(--blue);
      color: var(--white);
    }
    
    .page-header .subtitle {
      color: rgba(255,255,255,0.7);
    }
    
    /* Cards */
    .card.accent-red { border-left: 8px solid var(--red); }
    .card.accent-blue { border-left: 8px solid var(--blue); }
    .card.accent-yellow { border-left: 8px solid var(--yellow); }
    
    .comparison {
      display: flex;
      gap: 24px;
      margin-top: 16px;
    }
    
    .comp-item { flex: 1; }
    
    .comp-label {
      font-size: 0.75rem;
      color: var(--gray);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .comp-value {
      font-size: 1.5rem;
      font-weight: 700;
      margin-top: 4px;
    }
    
    .positive { color: var(--blue); }
    .positive::before { content: '‚ñ≤ '; }
    .negative { color: var(--red); }
    .negative::before { content: '‚ñº '; }
    
    .progress-bar {
      height: 8px;
      background: var(--light);
      margin-top: 16px;
    }
    
    .progress-fill {
      height: 100%;
      background: var(--blue);
      transition: width 0.5s ease;
    }
    
    /* Stats row */
    .stats-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-top: 24px;
    }
    
    .stat-card {
      background: var(--black);
      color: var(--white);
      padding: 24px;
      text-align: center;
    }
    
    .stat-value {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--yellow);
    }
    
    .stat-label {
      font-size: 0.75rem;
      color: var(--gray);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <div class="bauhaus-circle bg-circle"></div>
  <div class="bauhaus-square bg-square"></div>
  <div class="bauhaus-circle bg-circle-2"></div>
  
  <nav class="nav">
    <a href="index.html" class="nav-brand">
      <div class="musang-container">
        <div class="musang-body">ü¶ù</div>
        <div class="dust"></div>
        <div class="dust"></div>
        <div class="dust"></div>
      </div>
      <span class="nav-title">Run, Ganis, Run!</span>
    </a>
    <div class="nav-links">
      <a href="index.html" class="nav-link">This Week</a>
      <a href="dashboard.html" class="nav-link active">Dashboard</a>
      <a href="heatmap.html" class="nav-link">Heatmap</a>
      <a href="runs.html" class="nav-link">All Runs</a>
    </div>
  </nav>

  <header class="page-header">
    <h1>2026 Dashboard</h1>
    <p class="subtitle">Year-to-date performance comparisons</p>
  </header>

  <main class="container">
    <div class="grid">
      <div class="card accent-red">
        <div class="card-label">YTD vs Last Year (January)</div>
        <div class="card-value"><span id="ytdDistance">-</span><span class="card-unit">km</span></div>
        <div class="comparison">
          <div class="comp-item">
            <div class="comp-label">2025 Jan</div>
            <div class="comp-value" id="ytd2025">-</div>
          </div>
          <div class="comp-item">
            <div class="comp-label">Difference</div>
            <div class="comp-value" id="diffLastYear">-</div>
          </div>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressLastYear"></div>
        </div>
      </div>
      
      <div class="card accent-yellow">
        <div class="card-label">YTD vs Best Year (2021 January)</div>
        <div class="card-value"><span id="ytdDistance2">-</span><span class="card-unit">km</span></div>
        <div class="comparison">
          <div class="comp-item">
            <div class="comp-label">2021 Jan</div>
            <div class="comp-value" id="ytd2021">-</div>
          </div>
          <div class="comp-item">
            <div class="comp-label">Difference</div>
            <div class="comp-value" id="diffBestYear">-</div>
          </div>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressBestYear" style="background: var(--yellow);"></div>
        </div>
      </div>
    </div>

    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-value" id="totalRuns">-</div>
        <div class="stat-label">Total Runs 2026</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalHours">-</div>
        <div class="stat-label">Hours Running</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="bestYearProgress">-</div>
        <div class="stat-label">% of 2021 Goal</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="weeksHit">-</div>
        <div class="stat-label">Weeks Goal Hit</div>
      </div>
    </div>
  </main>

  <footer class="page-footer">
    Last updated: <span id="updatedAt">-</span> ¬∑ Synced from Strava
  </footer>

  <script>
    async function loadData() {
      try {
        const res = await fetch('data/stats.json');
        const d = await res.json();
        
        // YTD stats
        document.getElementById('ytdDistance').textContent = d.ytd_2026.distance_km;
        document.getElementById('ytdDistance2').textContent = d.ytd_2026.distance_km;
        document.getElementById('ytd2025').textContent = d.ytd_2025_same_period.distance_km + ' km';
        document.getElementById('ytd2021').textContent = d.ytd_2021_same_period.distance_km + ' km';
        
        // Differences
        const diffLast = d.ytd_2026.distance_km - d.ytd_2025_same_period.distance_km;
        const diffBest = d.ytd_2026.distance_km - d.ytd_2021_same_period.distance_km;
        
        const diffLastEl = document.getElementById('diffLastYear');
        diffLastEl.textContent = (diffLast >= 0 ? '+' : '') + diffLast.toFixed(1) + ' km';
        diffLastEl.className = 'comp-value ' + (diffLast >= 0 ? 'positive' : 'negative');
        
        const diffBestEl = document.getElementById('diffBestYear');
        diffBestEl.textContent = (diffBest >= 0 ? '+' : '') + diffBest.toFixed(1) + ' km';
        diffBestEl.className = 'comp-value ' + (diffBest >= 0 ? 'positive' : 'negative');
        
        // Progress bars
        const pctLast = Math.min(100, (d.ytd_2026.distance_km / d.ytd_2025_same_period.distance_km) * 100);
        const pctBest = Math.min(100, (d.ytd_2026.distance_km / d.ytd_2021_same_period.distance_km) * 100);
        document.getElementById('progressLastYear').style.width = pctLast + '%';
        document.getElementById('progressBestYear').style.width = pctBest + '%';
        
        // Stats
        document.getElementById('totalRuns').textContent = d.ytd_2026.runs;
        document.getElementById('totalHours').textContent = d.ytd_2026.time_hrs;
        document.getElementById('bestYearProgress').textContent = ((d.ytd_2026.distance_km / 928.7) * 100).toFixed(1) + '%';
        document.getElementById('weeksHit').textContent = Math.floor(d.ytd_2026.runs / 3);
        
        // Updated
        document.getElementById('updatedAt').textContent = new Date(d.updated_at).toLocaleString();
      } catch (e) {
        console.error('Error loading data:', e);
      }
    }
    loadData();
  </script>
</body>
</html>
